<div class="expense-wrapper">
  <h2 class="section-heading">{{title}}</h2>

  <form class="expense-form" (ngSubmit)="addExpense(expenseForm)" #expenseForm="ngForm" novalidate>
    <div class="form-row">
      <div class="form-group half-width">
        <label for="amount">Amount:</label>
        <input
          type="number"
          id="amount"
          name="amount"
          [(ngModel)]="newExpense.amount"
          required
          min="1"
          #amount="ngModel"
        />
        <small class="error-message" *ngIf="(amount.touched || expenseForm.submitted) && amount.invalid">
          Amount is required and must be greater than 0.
        </small>
      </div>  
    </div>
    <div class="form-group half-width">
  <div class="label-with-manage">
    <label for="categoryId">Category:</label>
    <button type="button" class="manage-btn" (click)="openCategoryManager()">Manage</button>
  </div>
  <select
    id="categoryId"
    name="categoryId"
    [(ngModel)]="newExpense.categoryId"
    required
    #categoryId="ngModel"
  >
    <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
  </select>
  <small class="error-message" *ngIf="(categoryId.touched || expenseForm.submitted) && categoryId.invalid">
    Category is required.
  </small>
</div>

    <div class="form-row"> 
      <div class="form-group third-width">
        <label for="expenseDate">Day:</label>
        <input
          type="number"
          id="expenseDate"
          name="expenseDate"
          [(ngModel)]="newExpense.expenseDate"
          required
          min="1"
          max="31"
          #expenseDate="ngModel"
        />
        <small class="error-message" *ngIf="(expenseDate.touched || expenseForm.submitted) && expenseDate.invalid">
          Day is required (1–31).
        </small>
      </div>

      <div class="form-group third-width">
        <label for="month">Month:</label>
        <input
          type="number"
          id="month"
          name="month"
          [(ngModel)]="newExpense.month"
          required
          min="1"
          max="12"
          #month="ngModel"
        />
        <small class="error-message" *ngIf="(month.touched || expenseForm.submitted) && month.invalid">
          Month is required (1–12).
        </small>
      </div>

      <div class="form-group third-width">
        <label for="year">Year:</label>
        <input
          type="number"
          id="year"
          name="year"
          [(ngModel)]="newExpense.year"
          required
          minlength="4"
          #year="ngModel"
        />
        <small class="error-message" *ngIf="(year.touched || expenseForm.submitted) && year.invalid">
          Year is required (e.g., 2025).
        </small>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description:</label>
      <input
        type="text"
        id="description"
        name="description"
        [(ngModel)]="newExpense.description"
        required
        minlength="3"
        #description="ngModel"
      />
      <small class="error-message" *ngIf="(description.touched || expenseForm.submitted) && description.invalid">
        Description is required (min 3 characters).
      </small>
    </div>
      <div class="Buttons">
    <button type="submit" class="btn btn-add">
      {{title}}
    </button>
    <button  class="btn btn-add cancel" (click)="Oncancel()">
      Cancel
    </button>
    </div>
  </form>
</div>
